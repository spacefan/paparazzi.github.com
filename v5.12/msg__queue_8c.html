<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Paparazzi UAS: sw/airborne/modules/loggers/sdlog_chibios/msg_queue.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="penguin_icon.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Paparazzi UAS
   &#160;<span id="projectnumber">v5.12_stable-2-g9c592a7-dirty</span>
   </div>
   <div id="projectbrief">Paparazzi is a free software Unmanned Aircraft System.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('msg__queue_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">msg_queue.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="msg__queue_8h_source.html">modules/loggers/sdlog_chibios/msg_queue.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tlsf__malloc_8h_source.html">modules/tlsf/tlsf_malloc.h</a>&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for msg_queue.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8c__incl.png" border="0" usemap="#sw_2airborne_2modules_2loggers_2sdlog__chibios_2msg__queue_8c" alt=""/></div>
<map name="sw_2airborne_2modules_2loggers_2sdlog__chibios_2msg__queue_8c" id="sw_2airborne_2modules_2loggers_2sdlog__chibios_2msg__queue_8c">
<area shape="rect" id="node2" href="msg__queue_8h.html" title="modules/loggers/sdlog\l_chibios/msg_queue.h" alt="" coords="168,109,335,151"/><area shape="rect" id="node5" href="tlsf__malloc_8h.html" title="Dynamic memory allocation based on TLSF library. " alt="" coords="33,199,217,225"/><area shape="rect" id="node6" href="tlsf__malloc__arch_8h.html" title="Dynamic memory allocation based on TLSF library. " alt="" coords="41,273,213,315"/><area shape="rect" id="node7" href="ram__arch_8h.html" title="Specific RAM section for DMA usage on F7. " alt="" coords="5,363,180,389"/></map>
</div>
</div>
<p><a href="msg__queue_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:unionMsgPtrLen"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8c.html#unionMsgPtrLen">MsgPtrLen</a></td></tr>
<tr class="separator:unionMsgPtrLen"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structMsgPtrLen_8____unnamed____"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8c.html#structMsgPtrLen_8____unnamed____">MsgPtrLen.__unnamed__</a></td></tr>
<tr class="separator:structMsgPtrLen_8____unnamed____"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afe3984fe4fa160d5aa65e531e83e5b04"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8c.html#afe3984fe4fa160d5aa65e531e83e5b04">MSGQ_HEAP</a>&#160;&#160;&#160;<a class="el" href="tlsf__malloc__arch_8h.html#accd82debd43b6bdbc664b5f131935e27">HEAP_CCM</a></td></tr>
<tr class="separator:afe3984fe4fa160d5aa65e531e83e5b04"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8cbe13f6801caa6bd92498e5772eb3df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8c.html#a8cbe13f6801caa6bd92498e5772eb3df">msgqueue_init</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *que, <a class="el" href="tlsf__malloc_8h.html#a44a4f63f07dd3c75f42ae32629036283">tlsf_memory_heap_t</a> *heap, msg_t *mb_buf, const cnt_t mb_size)</td></tr>
<tr class="memdesc:a8cbe13f6801caa6bd92498e5772eb3df"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialise <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a>  <a href="#a8cbe13f6801caa6bd92498e5772eb3df">More...</a><br /></td></tr>
<tr class="separator:a8cbe13f6801caa6bd92498e5772eb3df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ae94858e7c233420b3b35b1d6c0226e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8c.html#a7ae94858e7c233420b3b35b1d6c0226e">msgqueue_is_full</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *que)</td></tr>
<tr class="memdesc:a7ae94858e7c233420b3b35b1d6c0226e"><td class="mdescLeft">&#160;</td><td class="mdescRight">test if queue is full  <a href="#a7ae94858e7c233420b3b35b1d6c0226e">More...</a><br /></td></tr>
<tr class="separator:a7ae94858e7c233420b3b35b1d6c0226e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f51e84b25a2e05a3b905dcf826c4446"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8c.html#a0f51e84b25a2e05a3b905dcf826c4446">msgqueue_is_empty</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *que)</td></tr>
<tr class="memdesc:a0f51e84b25a2e05a3b905dcf826c4446"><td class="mdescLeft">&#160;</td><td class="mdescRight">test if queue is empty  <a href="#a0f51e84b25a2e05a3b905dcf826c4446">More...</a><br /></td></tr>
<tr class="separator:a0f51e84b25a2e05a3b905dcf826c4446"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b457b8a24d51625e782035fe54622a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2ba621978a511250f7250fb10e05ffbe">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8c.html#a6b457b8a24d51625e782035fe54622a7">msgqueue_send</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *que, void *<a class="el" href="high__speed__logger__direct__memory_8c.html#a32b52374003c5d7911e540c6a1c53488">msg</a>, const <a class="el" href="types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> msgLen, const <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a> urgency)</td></tr>
<tr class="memdesc:a6b457b8a24d51625e782035fe54622a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">send a buffer previously allocated by msgqueue_malloc_before_send  <a href="#a6b457b8a24d51625e782035fe54622a7">More...</a><br /></td></tr>
<tr class="separator:a6b457b8a24d51625e782035fe54622a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9c85548b02609202975402ff7efcd64"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2ba621978a511250f7250fb10e05ffbe">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8c.html#aa9c85548b02609202975402ff7efcd64">msgqueue_send_timeout</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *que, void *<a class="el" href="high__speed__logger__direct__memory_8c.html#a32b52374003c5d7911e540c6a1c53488">msg</a>, const <a class="el" href="types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> msgLen, const <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a> urgency, const systime_t timout)</td></tr>
<tr class="memdesc:aa9c85548b02609202975402ff7efcd64"><td class="mdescLeft">&#160;</td><td class="mdescRight">send a buffer previously allocated by msgqueue_malloc_before_send  <a href="#aa9c85548b02609202975402ff7efcd64">More...</a><br /></td></tr>
<tr class="separator:aa9c85548b02609202975402ff7efcd64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac728799fec55bd850be4fbc674628a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2ba621978a511250f7250fb10e05ffbe">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8c.html#aac728799fec55bd850be4fbc674628a9">msgqueue_copy_send_timeout</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *que, const void *<a class="el" href="high__speed__logger__direct__memory_8c.html#a32b52374003c5d7911e540c6a1c53488">msg</a>, const <a class="el" href="types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> msgLen, const <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a> urgency, const systime_t timout)</td></tr>
<tr class="memdesc:aac728799fec55bd850be4fbc674628a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">send a buffer <em>NOT</em> previously allocated  <a href="#aac728799fec55bd850be4fbc674628a9">More...</a><br /></td></tr>
<tr class="separator:aac728799fec55bd850be4fbc674628a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8e38447d739bbdfab151c413e813070"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2ba621978a511250f7250fb10e05ffbe">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8c.html#ab8e38447d739bbdfab151c413e813070">msgqueue_copy_send</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *que, const void *<a class="el" href="high__speed__logger__direct__memory_8c.html#a32b52374003c5d7911e540c6a1c53488">msg</a>, const <a class="el" href="types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> msgLen, const <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a> urgency)</td></tr>
<tr class="memdesc:ab8e38447d739bbdfab151c413e813070"><td class="mdescLeft">&#160;</td><td class="mdescRight">send a buffer <em>NOT</em> previously allocated  <a href="#ab8e38447d739bbdfab151c413e813070">More...</a><br /></td></tr>
<tr class="separator:ab8e38447d739bbdfab151c413e813070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ddc872b801355fb65d98f18829419bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2ba621978a511250f7250fb10e05ffbe">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8c.html#a6ddc872b801355fb65d98f18829419bd">msgqueue_pop</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *que, void **msgPtr)</td></tr>
<tr class="memdesc:a6ddc872b801355fb65d98f18829419bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">wait then receive message  <a href="#a6ddc872b801355fb65d98f18829419bd">More...</a><br /></td></tr>
<tr class="separator:a6ddc872b801355fb65d98f18829419bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38dd61b3d9daa051032159c2473eb2cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a2ba621978a511250f7250fb10e05ffbe">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8c.html#a38dd61b3d9daa051032159c2473eb2cc">msgqueue_pop_timeout</a> (<a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *que, void **msgPtr, const systime_t timout)</td></tr>
<tr class="memdesc:a38dd61b3d9daa051032159c2473eb2cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">receive message specifying timeout  <a href="#a38dd61b3d9daa051032159c2473eb2cc">More...</a><br /></td></tr>
<tr class="separator:a38dd61b3d9daa051032159c2473eb2cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a458fcde3b3a9e960d56fdc25b71a3c0f"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8c.html#a458fcde3b3a9e960d56fdc25b71a3c0f">msgqueue_strerror</a> (const <a class="el" href="msg__queue_8h.html#af21955713d9e8a8e5ffcb337a33dfefc">MsgQueueStatus</a> _errno)</td></tr>
<tr class="memdesc:a458fcde3b3a9e960d56fdc25b71a3c0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">debug api  <a href="#a458fcde3b3a9e960d56fdc25b71a3c0f">More...</a><br /></td></tr>
<tr class="separator:a458fcde3b3a9e960d56fdc25b71a3c0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab387da4a277d7554ae465bb937203ca2"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg__queue_8c.html#ab387da4a277d7554ae465bb937203ca2">_strerror</a> []</td></tr>
<tr class="separator:ab387da4a277d7554ae465bb937203ca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="unionMsgPtrLen" id="unionMsgPtrLen"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">union MsgPtrLen</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p>Definition at line <a class="el" href="msg__queue_8c_source.html#l00033">33</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for MsgPtrLen:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="unionMsgPtrLen__coll__graph.png" border="0" usemap="#MsgPtrLen_coll__map" alt="Collaboration graph"/></div>
<map name="MsgPtrLen_coll__map" id="MsgPtrLen_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a0143cc8c3e828a9a164aeb18b8e69c64"></a>struct <a class="el" href="msg__queue_8c.html#structMsgPtrLen_8____unnamed____">MsgPtrLen</a></td>
<td class="fieldname">
__unnamed__</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a7ab9b401c73d3a11a1c6aaede9a22519"></a>msg_t</td>
<td class="fieldname">
msg_ptr_len</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="structMsgPtrLen_8____unnamed____" id="structMsgPtrLen_8____unnamed____"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct MsgPtrLen.__unnamed__</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p>Definition at line <a class="el" href="msg__queue_8c_source.html#l00034">34</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="af5a8e923f8cd24b56b3bab32358cc58a"></a><a class="el" href="types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></td>
<td class="fieldname">
len</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a155d9a6df1242df7a3fe0039e1a10625"></a><a class="el" href="types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></td>
<td class="fieldname">
ptrOfst</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="afe3984fe4fa160d5aa65e531e83e5b04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSGQ_HEAP&#160;&#160;&#160;<a class="el" href="tlsf__malloc__arch_8h.html#accd82debd43b6bdbc664b5f131935e27">HEAP_CCM</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="msg__queue_8c_source.html#l00030">30</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p>Referenced by <a class="el" href="msg__queue_8c_source.html#l00114">msgqueue_copy_send_timeout()</a>, <a class="el" href="msg__queue_8c_source.html#l00139">msgqueue_pop_timeout()</a>, and <a class="el" href="msg__queue_8c_source.html#l00076">msgqueue_send_timeout()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ab8e38447d739bbdfab151c413e813070"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2ba621978a511250f7250fb10e05ffbe">int32_t</a> msgqueue_copy_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>msgLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a>&#160;</td>
          <td class="paramname"><em>urgency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send a buffer <em>NOT</em> previously allocated </p>
<p>buffer is copied before beeing sent, buffer is still valid after this function returns. Less effective that zero copy alternatives which has been to be preferably used Non blocking, if queue is full, report error and immediately return </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>pointer to buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msgLen</td><td>length of buffer (the same param that has been given to msgqueue_malloc_before_send) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">urgency</td><td>regular=queued at end of fifo or out_of_band queued at start of fifo </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if &gt; 0 : requested length if &lt; 0 : error status (see errors at begining of this header file) </dd></dl>

<p>Definition at line <a class="el" href="msg__queue_8c_source.html#l00127">127</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p>References <a class="el" href="msg__queue_8c_source.html#l00114">msgqueue_copy_send_timeout()</a>.</p>

<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8c_ab8e38447d739bbdfab151c413e813070_cgraph.png" border="0" usemap="#msg__queue_8c_ab8e38447d739bbdfab151c413e813070_cgraph" alt=""/></div>
<map name="msg__queue_8c_ab8e38447d739bbdfab151c413e813070_cgraph" id="msg__queue_8c_ab8e38447d739bbdfab151c413e813070_cgraph">
<area shape="rect" id="node2" href="msg__queue_8c.html#aac728799fec55bd850be4fbc674628a9" title="send a buffer NOT previously allocated " alt="" coords="219,23,384,65"/><area shape="rect" id="node3" href="tlsf__malloc__arch_8c.html#ad0333be97f2cbeecedde494c53243648" title="tlsf_malloc_r" alt="" coords="473,5,576,32"/><area shape="rect" id="node4" href="msg__queue_8c.html#aa9c85548b02609202975402ff7efcd64" title="send a buffer previously allocated by msgqueue_malloc_before_send " alt="" coords="432,56,617,83"/><area shape="rect" id="node5" href="tlsf__malloc__arch_8c.html#a1324770050af7b18bce649d036612cf1" title="tlsf_get_heap_addr" alt="" coords="665,31,809,57"/><area shape="rect" id="node6" href="tlsf__malloc__arch_8c.html#a17c0510bfc2132940c5d57578d37fe5e" title="tlsf_free_r" alt="" coords="695,81,780,108"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aac728799fec55bd850be4fbc674628a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2ba621978a511250f7250fb10e05ffbe">int32_t</a> msgqueue_copy_send_timeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>msgLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a>&#160;</td>
          <td class="paramname"><em>urgency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const systime_t&#160;</td>
          <td class="paramname"><em>timout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send a buffer <em>NOT</em> previously allocated </p>
<p>buffer is copied before beeing sent, buffer is still valid after this function returns. Less effective that zero copy alternatives which has been to be preferably used </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>pointer to buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msgLen</td><td>length of buffer (the same param that has been given to msgqueue_malloc_before_send) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">urgency</td><td>regular=queued at end of fifo or out_of_band queued at start of fifo </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timout</td><td>: time to wait for MailBox avaibility (can be TIME_INFINITE or TIME_IMMEDIATE) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if &gt; 0 : requested length if &lt; 0 : error status (see errors at begining of this header file) </dd></dl>

<p>Definition at line <a class="el" href="msg__queue_8c_source.html#l00114">114</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p>References <a class="el" href="msg__queue_8c_source.html#l00030">MSGQ_HEAP</a>, <a class="el" href="msg__queue_8h_source.html#l00039">MsgQueue_MAILBOX_FULL</a>, <a class="el" href="msg__queue_8c_source.html#l00076">msgqueue_send_timeout()</a>, and <a class="el" href="tlsf__malloc__arch_8c_source.html#l00095">tlsf_malloc_r()</a>.</p>

<p>Referenced by <a class="el" href="msg__queue_8c_source.html#l00127">msgqueue_copy_send()</a>.</p>

<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8c_aac728799fec55bd850be4fbc674628a9_cgraph.png" border="0" usemap="#msg__queue_8c_aac728799fec55bd850be4fbc674628a9_cgraph" alt=""/></div>
<map name="msg__queue_8c_aac728799fec55bd850be4fbc674628a9_cgraph" id="msg__queue_8c_aac728799fec55bd850be4fbc674628a9_cgraph">
<area shape="rect" id="node2" href="msg__queue_8c.html#aa9c85548b02609202975402ff7efcd64" title="send a buffer previously allocated by msgqueue_malloc_before_send " alt="" coords="219,31,404,57"/><area shape="rect" id="node5" href="tlsf__malloc__arch_8c.html#ad0333be97f2cbeecedde494c53243648" title="tlsf_malloc_r" alt="" coords="260,81,363,108"/><area shape="rect" id="node3" href="tlsf__malloc__arch_8c.html#a1324770050af7b18bce649d036612cf1" title="tlsf_get_heap_addr" alt="" coords="452,5,596,32"/><area shape="rect" id="node4" href="tlsf__malloc__arch_8c.html#a17c0510bfc2132940c5d57578d37fe5e" title="tlsf_free_r" alt="" coords="481,56,567,83"/></map>
</div>
</p>

<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8c_aac728799fec55bd850be4fbc674628a9_icgraph.png" border="0" usemap="#msg__queue_8c_aac728799fec55bd850be4fbc674628a9_icgraph" alt=""/></div>
<map name="msg__queue_8c_aac728799fec55bd850be4fbc674628a9_icgraph" id="msg__queue_8c_aac728799fec55bd850be4fbc674628a9_icgraph">
<area shape="rect" id="node2" href="msg__queue_8h.html#ab8e38447d739bbdfab151c413e813070" title="send a buffer NOT previously allocated " alt="" coords="219,13,384,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8cbe13f6801caa6bd92498e5772eb3df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void msgqueue_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tlsf__malloc_8h.html#a44a4f63f07dd3c75f42ae32629036283">tlsf_memory_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">msg_t *&#160;</td>
          <td class="paramname"><em>mb_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cnt_t&#160;</td>
          <td class="paramname"><em>mb_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialise <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> </p>
<p>init sdQueue objet, tie memory pool buffer, tie mailbox buffer initialize mailbox </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">que</td><td>opaque object to be initialized </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">heap</td><td>reference to the tlsf heap object (needed if module should free memory) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mb_buff</td><td>internal buffer used by MailBox (see Chibios Doc) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mb_size</td><td>size of previous buffer (length of MailBox queue) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="msg__queue_8c_source.html#l00042">42</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p>References <a class="el" href="msg__queue_8h_source.html#l00227">MsgQueue::heap</a>, and <a class="el" href="msg__queue_8h_source.html#l00226">MsgQueue::mb</a>.</p>

<p>Referenced by <a class="el" href="sdLog_8c_source.html#l00193">sdLogInit()</a>.</p>

<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8c_a8cbe13f6801caa6bd92498e5772eb3df_icgraph.png" border="0" usemap="#msg__queue_8c_a8cbe13f6801caa6bd92498e5772eb3df_icgraph" alt=""/></div>
<map name="msg__queue_8c_a8cbe13f6801caa6bd92498e5772eb3df_icgraph" id="msg__queue_8c_a8cbe13f6801caa6bd92498e5772eb3df_icgraph">
<area shape="rect" id="node2" href="sdLog_8h.html#a598888320386c21f975d32d68f29bcf3" title="initialise sdLog " alt="" coords="169,5,248,32"/><area shape="rect" id="node3" href="sdlog__chibios_8c.html#a7cf4c749454b496e749b47e614750109" title="thd_startlog" alt="" coords="296,5,395,32"/><area shape="rect" id="node4" href="sdlog__chibios_8h.html#aeeba7682db35a9becddc07935f5d256a" title="sdlog_chibios_init" alt="" coords="443,5,576,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0f51e84b25a2e05a3b905dcf826c4446"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool msgqueue_is_empty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>test if queue is empty </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if empty, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="msg__queue_8c_source.html#l00059">59</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p>References <a class="el" href="msg__queue_8h_source.html#l00226">MsgQueue::mb</a>.</p>

</div>
</div>
<a class="anchor" id="a7ae94858e7c233420b3b35b1d6c0226e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool msgqueue_is_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>test if queue is full </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if full, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="msg__queue_8c_source.html#l00050">50</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p>References <a class="el" href="msg__queue_8h_source.html#l00226">MsgQueue::mb</a>.</p>

</div>
</div>
<a class="anchor" id="a6ddc872b801355fb65d98f18829419bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2ba621978a511250f7250fb10e05ffbe">int32_t</a> msgqueue_pop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>msgPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>wait then receive message </p>
<p>this is zero copy api, blocking call usage : struct MyStruct *msg msgqueue_pop (&amp;que, void (void **) &amp;msg); use msg-&gt;myField etc etc tlsf_free(MSGQ_HEAP, msg); </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">msgPtr</td><td>pointer to pointer to buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if &gt; 0 : length of received msg if &lt; 0 : error status (see errors at begining of this header file) </dd></dl>

<p>Definition at line <a class="el" href="msg__queue_8c_source.html#l00134">134</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p>References <a class="el" href="msg__queue_8c_source.html#l00139">msgqueue_pop_timeout()</a>.</p>

<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8c_a6ddc872b801355fb65d98f18829419bd_cgraph.png" border="0" usemap="#msg__queue_8c_a6ddc872b801355fb65d98f18829419bd_cgraph" alt=""/></div>
<map name="msg__queue_8c_a6ddc872b801355fb65d98f18829419bd_cgraph" id="msg__queue_8c_a6ddc872b801355fb65d98f18829419bd_cgraph">
<area shape="rect" id="node2" href="msg__queue_8c.html#a38dd61b3d9daa051032159c2473eb2cc" title="receive message specifying timeout " alt="" coords="175,5,353,32"/><area shape="rect" id="node3" href="tlsf__malloc__arch_8c.html#a1324770050af7b18bce649d036612cf1" title="tlsf_get_heap_addr" alt="" coords="401,5,545,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a38dd61b3d9daa051032159c2473eb2cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2ba621978a511250f7250fb10e05ffbe">int32_t</a> msgqueue_pop_timeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>msgPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const systime_t&#160;</td>
          <td class="paramname"><em>timout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>receive message specifying timeout </p>
<p>this is zero copy api, blocking call usage : struct MyStruct *msg msgqueue_pop (&amp;que, void (void **) &amp;msg); use msg-&gt;myField etc etc msgqueue_free_after_pop (&amp;que, msg); </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">msgPtr</td><td>pointer to pointer to buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timout</td><td>: time to wait for MailBox avaibility (can be TIME_INFINITE or TIME_IMMEDIATE) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if &gt; 0 : length of received msg if &lt; 0 : error status (see errors at begining of this header file) </dd></dl>

<p>Definition at line <a class="el" href="msg__queue_8c_source.html#l00139">139</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p>References <a class="el" href="msg__queue_8h_source.html#l00226">MsgQueue::mb</a>, <a class="el" href="msg__queue_8c_source.html#l00038">MsgPtrLen::msg_ptr_len</a>, <a class="el" href="msg__queue_8c_source.html#l00030">MSGQ_HEAP</a>, <a class="el" href="msg__queue_8h_source.html#l00041">MsgQueue_MAILBOX_TIMEOUT</a>, and <a class="el" href="tlsf__malloc__arch_8c_source.html#l00090">tlsf_get_heap_addr()</a>.</p>

<p>Referenced by <a class="el" href="msg__queue_8c_source.html#l00134">msgqueue_pop()</a>.</p>

<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8c_a38dd61b3d9daa051032159c2473eb2cc_cgraph.png" border="0" usemap="#msg__queue_8c_a38dd61b3d9daa051032159c2473eb2cc_cgraph" alt=""/></div>
<map name="msg__queue_8c_a38dd61b3d9daa051032159c2473eb2cc_cgraph" id="msg__queue_8c_a38dd61b3d9daa051032159c2473eb2cc_cgraph">
<area shape="rect" id="node2" href="tlsf__malloc__arch_8c.html#a1324770050af7b18bce649d036612cf1" title="tlsf_get_heap_addr" alt="" coords="232,5,376,32"/></map>
</div>
</p>

<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8c_a38dd61b3d9daa051032159c2473eb2cc_icgraph.png" border="0" usemap="#msg__queue_8c_a38dd61b3d9daa051032159c2473eb2cc_icgraph" alt=""/></div>
<map name="msg__queue_8c_a38dd61b3d9daa051032159c2473eb2cc_icgraph" id="msg__queue_8c_a38dd61b3d9daa051032159c2473eb2cc_icgraph">
<area shape="rect" id="node2" href="msg__queue_8h.html#a6ddc872b801355fb65d98f18829419bd" title="wait then receive message " alt="" coords="232,5,353,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6b457b8a24d51625e782035fe54622a7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2ba621978a511250f7250fb10e05ffbe">int32_t</a> msgqueue_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>msgLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a>&#160;</td>
          <td class="paramname"><em>urgency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send a buffer previously allocated by msgqueue_malloc_before_send </p>
<p>deallocation is done by the caching thread which actually write data to sd card from the sender point of view, ptr should be considered invalid after beeing sent. Even if msgqueue_send fail, deallocation is done Non blocking, if queue is full, report error and immediately return usage : msg = tlsf_malloc(MSGQ_HEAP, msg, msgLen); msgqueue_send (que, msg, msgLen, urgency);</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>pointer to buffer given by msgqueue_malloc_before_send </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msgLen</td><td>length of buffer (the same param that has been given to msgqueue_malloc_before_send) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">urgency</td><td>regular=queued at end of fifo or out_of_band queued at start of fifo </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if &gt; 0 : requested length if &lt; 0 : error status (see errors at begining of this header file) </dd></dl>

<p>Definition at line <a class="el" href="msg__queue_8c_source.html#l00069">69</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p>References <a class="el" href="msg__queue_8c_source.html#l00076">msgqueue_send_timeout()</a>.</p>

<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8c_a6b457b8a24d51625e782035fe54622a7_cgraph.png" border="0" usemap="#msg__queue_8c_a6b457b8a24d51625e782035fe54622a7_cgraph" alt=""/></div>
<map name="msg__queue_8c_a6b457b8a24d51625e782035fe54622a7_cgraph" id="msg__queue_8c_a6b457b8a24d51625e782035fe54622a7_cgraph">
<area shape="rect" id="node2" href="msg__queue_8c.html#aa9c85548b02609202975402ff7efcd64" title="send a buffer previously allocated by msgqueue_malloc_before_send " alt="" coords="181,31,367,57"/><area shape="rect" id="node3" href="tlsf__malloc__arch_8c.html#a1324770050af7b18bce649d036612cf1" title="tlsf_get_heap_addr" alt="" coords="415,5,559,32"/><area shape="rect" id="node4" href="tlsf__malloc__arch_8c.html#a17c0510bfc2132940c5d57578d37fe5e" title="tlsf_free_r" alt="" coords="444,56,529,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa9c85548b02609202975402ff7efcd64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a2ba621978a511250f7250fb10e05ffbe">int32_t</a> msgqueue_send_timeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> *&#160;</td>
          <td class="paramname"><em>que</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="types_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>msgLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="msg__queue_8h.html#a515d85b3345a7403ee1c9f4b8b5769fc">MsgQueueUrgency</a>&#160;</td>
          <td class="paramname"><em>urgency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const systime_t&#160;</td>
          <td class="paramname"><em>timout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send a buffer previously allocated by msgqueue_malloc_before_send </p>
<p>deallocation is done by the caching thread which actually write data to sd card from the sender point of view, ptr should be considered invalid after beeing sent. Even if msgqueue_send fail, deallocation is done usage : msg = tlsf_malloc(MSGQ_HEAP, msg, msgLen); msgqueue_send (que, msg, msgLen, urgency);</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">que</td><td>pointer to opaque <a class="el" href="msg__queue_8h.html#structMsgQueue">MsgQueue</a> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>pointer to buffer given by msgqueue_malloc_before_send </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msgLen</td><td>length of buffer (the same param that has been given to msgqueue_malloc_before_send) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">urgency</td><td>regular=queued at end of fifo or out_of_band queued at start of fifo </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timout</td><td>: time to wait for MailBox avaibility (can be TIME_INFINITE or TIME_IMMEDIATE) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if &gt; 0 : requested length if &lt; 0 : error status (see errors at begining of this header file) </dd></dl>

<p>Definition at line <a class="el" href="msg__queue_8c_source.html#l00076">76</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p>References <a class="el" href="msg__queue_8h_source.html#l00227">MsgQueue::heap</a>, <a class="el" href="msg__queue_8h_source.html#l00226">MsgQueue::mb</a>, <a class="el" href="msg__queue_8c_source.html#l00038">MsgPtrLen::msg_ptr_len</a>, <a class="el" href="msg__queue_8c_source.html#l00030">MSGQ_HEAP</a>, <a class="el" href="msg__queue_8h_source.html#l00043">MsgQueue_INVALID_PTR</a>, <a class="el" href="msg__queue_8h_source.html#l00039">MsgQueue_MAILBOX_FULL</a>, <a class="el" href="msg__queue_8h_source.html#l00047">MsgQueue_REGULAR</a>, <a class="el" href="tlsf__malloc__arch_8c_source.html#l00119">tlsf_free_r()</a>, and <a class="el" href="tlsf__malloc__arch_8c_source.html#l00090">tlsf_get_heap_addr()</a>.</p>

<p>Referenced by <a class="el" href="msg__queue_8c_source.html#l00114">msgqueue_copy_send_timeout()</a>, and <a class="el" href="msg__queue_8c_source.html#l00069">msgqueue_send()</a>.</p>

<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8c_aa9c85548b02609202975402ff7efcd64_cgraph.png" border="0" usemap="#msg__queue_8c_aa9c85548b02609202975402ff7efcd64_cgraph" alt=""/></div>
<map name="msg__queue_8c_aa9c85548b02609202975402ff7efcd64_cgraph" id="msg__queue_8c_aa9c85548b02609202975402ff7efcd64_cgraph">
<area shape="rect" id="node2" href="tlsf__malloc__arch_8c.html#a17c0510bfc2132940c5d57578d37fe5e" title="tlsf_free_r" alt="" coords="268,5,353,32"/><area shape="rect" id="node3" href="tlsf__malloc__arch_8c.html#a1324770050af7b18bce649d036612cf1" title="tlsf_get_heap_addr" alt="" coords="239,56,383,83"/></map>
</div>
</p>

<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="msg__queue_8c_aa9c85548b02609202975402ff7efcd64_icgraph.png" border="0" usemap="#msg__queue_8c_aa9c85548b02609202975402ff7efcd64_icgraph" alt=""/></div>
<map name="msg__queue_8c_aa9c85548b02609202975402ff7efcd64_icgraph" id="msg__queue_8c_aa9c85548b02609202975402ff7efcd64_icgraph">
<area shape="rect" id="node2" href="msg__queue_8h.html#aac728799fec55bd850be4fbc674628a9" title="send a buffer NOT previously allocated " alt="" coords="239,5,404,47"/><area shape="rect" id="node4" href="msg__queue_8h.html#a6b457b8a24d51625e782035fe54622a7" title="send a buffer previously allocated by msgqueue_malloc_before_send " alt="" coords="257,71,385,98"/><area shape="rect" id="node3" href="msg__queue_8h.html#ab8e38447d739bbdfab151c413e813070" title="send a buffer NOT previously allocated " alt="" coords="452,13,617,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a458fcde3b3a9e960d56fdc25b71a3c0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* msgqueue_strerror </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="msg__queue_8h.html#af21955713d9e8a8e5ffcb337a33dfefc">MsgQueueStatus</a>&#160;</td>
          <td class="paramname"><em>errno</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>debug api </p>
<p>give ascii string corresponding to the given errno </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">errno</td><td>: staus </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to error string </dd></dl>

<p>Definition at line <a class="el" href="msg__queue_8c_source.html#l00168">168</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p>References <a class="el" href="msg__queue_8c_source.html#l00159">_strerror</a>, and <a class="el" href="msg__queue_8h_source.html#l00039">MsgQueue_MAILBOX_FULL</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ab387da4a277d7554ae465bb937203ca2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* _strerror[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {<span class="stringliteral">&quot;MsgQueue_MAILBOX_FULL&quot;</span>,</div>
<div class="line">                                  <span class="stringliteral">&quot;MsgQueue_MAILBOX_FAIL&quot;</span>,</div>
<div class="line">                                  <span class="stringliteral">&quot;MsgQueue_MAILBOX_TIMEOUT&quot;</span>,</div>
<div class="line">                                  <span class="stringliteral">&quot;MsgQueue_MAILBOX_NOT_EMPTY&quot;</span>,</div>
<div class="line">                                  <span class="stringliteral">&quot;MsgQueue_OK&quot;</span>,</div>
<div class="line">                                  <span class="stringliteral">&quot;MsgQueue_INVALID_PTR&quot;</span>,</div>
<div class="line">                                  <span class="stringliteral">&quot;MsgQueue_INVALID_ERRNO&quot;</span></div>
<div class="line">                                 }</div>
</div><!-- fragment -->
<p>Definition at line <a class="el" href="msg__queue_8c_source.html#l00159">159</a> of file <a class="el" href="msg__queue_8c_source.html">msg_queue.c</a>.</p>

<p>Referenced by <a class="el" href="msg__queue_8c_source.html#l00168">msgqueue_strerror()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_01fcd3835fb4e7d9331b722d86291b65.html">sw</a></li><li class="navelem"><a class="el" href="dir_5e9153041680afc3c016fd52fa730b56.html">airborne</a></li><li class="navelem"><a class="el" href="dir_c2abcdd6ccb39c3582929c0e3f5651c2.html">modules</a></li><li class="navelem"><a class="el" href="dir_cbf4be70f5fb954ea1d2a546dd70b40e.html">loggers</a></li><li class="navelem"><a class="el" href="dir_c27662836f6a804eadd3e3b5df5506a4.html">sdlog_chibios</a></li><li class="navelem"><a class="el" href="msg__queue_8c.html">msg_queue.c</a></li>
    <li class="footer">Generated on Wed Nov 8 2017 12:03:10 for Paparazzi UAS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
