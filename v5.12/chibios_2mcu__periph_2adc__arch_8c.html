<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Paparazzi UAS: sw/airborne/arch/chibios/mcu_periph/adc_arch.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="penguin_icon.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Paparazzi UAS
   &#160;<span id="projectnumber">v5.12_stable-2-g9c592a7-dirty</span>
   </div>
   <div id="projectbrief">Paparazzi is a free software Unmanned Aircraft System.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('chibios_2mcu__periph_2adc__arch_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">adc_arch.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>ADC driver.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="adc_8h_source.html">mcu_periph/adc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="gpio_8h_source.html">mcu_periph/gpio.h</a>&quot;</code><br />
<code>#include &quot;hal.h&quot;</code><br />
<code>#include &quot;std.h&quot;</code><br />
<code>#include &quot;<a class="el" href="ram__arch_8h_source.html">mcu_periph/ram_arch.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for adc_arch.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="chibios_2mcu__periph_2adc__arch_8c__incl.png" border="0" usemap="#sw_2airborne_2arch_2chibios_2mcu__periph_2adc__arch_8c" alt=""/></div>
<map name="sw_2airborne_2arch_2chibios_2mcu__periph_2adc__arch_8c" id="sw_2airborne_2arch_2chibios_2mcu__periph_2adc__arch_8c">
<area shape="rect" id="node2" href="adc_8h.html" title="arch independent ADC (Analog to Digital Converter) API " alt="" coords="132,95,268,121"/><area shape="rect" id="node5" href="gpio_8h.html" title="Some architecture independent helper functions for GPIOs. " alt="" coords="359,95,499,121"/><area shape="rect" id="node9" href="ram__arch_8h.html" title="Specific RAM section for DMA usage on F7. " alt="" coords="602,95,777,121"/><area shape="rect" id="node3" href="inttypes_8h.html" title="inttypes.h" alt="" coords="5,169,91,196"/></map>
</div>
</div>
<p><a href="chibios_2mcu__periph_2adc__arch_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2934d6c02a6319444fb3e892c72cb8f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a2934d6c02a6319444fb3e892c72cb8f6">USE_AD1</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a2934d6c02a6319444fb3e892c72cb8f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e829897b1929e18c1413dd484408d4a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a6e829897b1929e18c1413dd484408d4a">ADC_BUF_DEPTH</a>&#160;&#160;&#160;(<a class="el" href="adc_8h.html#a66ebc63de71cc36b02ef080d9e990bac">MAX_AV_NB_SAMPLE</a>/2)</td></tr>
<tr class="separator:a6e829897b1929e18c1413dd484408d4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9ca94b04798d83640f0b79ea81fe46a9"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a9ca94b04798d83640f0b79ea81fe46a9">IN_DMA_SECTION</a> (adcsample_t adc_samples[<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a> *<a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a6e829897b1929e18c1413dd484408d4a">ADC_BUF_DEPTH</a>])</td></tr>
<tr class="separator:a9ca94b04798d83640f0b79ea81fe46a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab20565c2f3d25af97a62849647c4cd71"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#ab20565c2f3d25af97a62849647c4cd71">adc_regular_sequence</a> (<a class="el" href="types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> *sqr1, <a class="el" href="types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> *sqr2, <a class="el" href="types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> *sqr3, <a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> length, const <a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="el" href="ADS8344_8c.html#a715f5cb061d11eb75981741eda4dafcd">channel</a>[])</td></tr>
<tr class="separator:ab20565c2f3d25af97a62849647c4cd71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4fef74b6c7509b76877e940657b2603"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#aa4fef74b6c7509b76877e940657b2603">adc_sample_time_on_all_channels</a> (<a class="el" href="types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> *smpr1, <a class="el" href="types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> *smpr2, <a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> time)</td></tr>
<tr class="separator:aa4fef74b6c7509b76877e940657b2603"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c618f185daded30a24ca6ca8a5b9f90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a0c618f185daded30a24ca6ca8a5b9f90">adc1callback</a> (ADCDriver *adcp, adcsample_t *buffer, size_t n)</td></tr>
<tr class="memdesc:a0c618f185daded30a24ca6ca8a5b9f90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adc1 callback.  <a href="#a0c618f185daded30a24ca6ca8a5b9f90">More...</a><br /></td></tr>
<tr class="separator:a0c618f185daded30a24ca6ca8a5b9f90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab33213b168f1b881ddc092b70d45e130"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#ab33213b168f1b881ddc092b70d45e130">adcerrorcallback</a> (ADCDriver *adcp, adcerror_t err)</td></tr>
<tr class="memdesc:ab33213b168f1b881ddc092b70d45e130"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adc error callback.  <a href="#ab33213b168f1b881ddc092b70d45e130">More...</a><br /></td></tr>
<tr class="separator:ab33213b168f1b881ddc092b70d45e130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a289883844d6749adab1cee5aabe41824"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a289883844d6749adab1cee5aabe41824">adc_buf_channel</a> (<a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> adc_channel, struct <a class="el" href="adc_8h.html#structadc__buf">adc_buf</a> *s, <a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> av_nb_sample)</td></tr>
<tr class="memdesc:a289883844d6749adab1cee5aabe41824"><td class="mdescLeft">&#160;</td><td class="mdescRight">Link between ChibiOS ADC drivers and Paparazzi adc_buffers.  <a href="#a289883844d6749adab1cee5aabe41824">More...</a><br /></td></tr>
<tr class="separator:a289883844d6749adab1cee5aabe41824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b815e6730e8723a6d1d06d9ef8f31c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a2b815e6730e8723a6d1d06d9ef8f31c0">adc_init</a> (void)</td></tr>
<tr class="memdesc:a2b815e6730e8723a6d1d06d9ef8f31c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adc init.  <a href="#a2b815e6730e8723a6d1d06d9ef8f31c0">More...</a><br /></td></tr>
<tr class="separator:a2b815e6730e8723a6d1d06d9ef8f31c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acee546d2b3b7908820ea25216782402b"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#acee546d2b3b7908820ea25216782402b">adc_channel_map</a> [<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td></tr>
<tr class="memdesc:acee546d2b3b7908820ea25216782402b"><td class="mdescLeft">&#160;</td><td class="mdescRight">#endif  <a href="#acee546d2b3b7908820ea25216782402b">More...</a><br /></td></tr>
<tr class="separator:acee546d2b3b7908820ea25216782402b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd39363b0bc5b73c6cb4b0d0cc484d90"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#afd39363b0bc5b73c6cb4b0d0cc484d90">adc_error_flag</a> = 0</td></tr>
<tr class="separator:afd39363b0bc5b73c6cb4b0d0cc484d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae518ea232632d8202116d5981e6c7be8"><td class="memItemLeft" align="right" valign="top">ADCDriver *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#ae518ea232632d8202116d5981e6c7be8">adcp_err</a> = NULL</td></tr>
<tr class="separator:ae518ea232632d8202116d5981e6c7be8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a235d7be89fd1bddc533d5cb64bf0a839"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="adc_8h.html#structadc__buf">adc_buf</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a235d7be89fd1bddc533d5cb64bf0a839">adc1_buffers</a> [<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td></tr>
<tr class="separator:a235d7be89fd1bddc533d5cb64bf0a839"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48348066f5ca0fe6ddf05e233559e513"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a48348066f5ca0fe6ddf05e233559e513">adc1_sum_tmp</a> [<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td></tr>
<tr class="separator:a48348066f5ca0fe6ddf05e233559e513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99a4c90a514730666d9bdd5c36832756"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a99a4c90a514730666d9bdd5c36832756">adc1_samples_tmp</a> [<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td></tr>
<tr class="separator:a99a4c90a514730666d9bdd5c36832756"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a781bb82a68e5872fbd38fda51f0edb"><td class="memItemLeft" align="right" valign="top">static ADCConversionGroup&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html#a2a781bb82a68e5872fbd38fda51f0edb">adcgrpcfg</a></td></tr>
<tr class="memdesc:a2a781bb82a68e5872fbd38fda51f0edb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuration structure must be global.  <a href="#a2a781bb82a68e5872fbd38fda51f0edb">More...</a><br /></td></tr>
<tr class="separator:a2a781bb82a68e5872fbd38fda51f0edb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>ADC driver. </p>
<p>ADC defines for Lia board (STM32F105) 5 Channels: 1 - ADC1, Channel 13 2 - ADC2, Channel 10 3 - ADC3, Channel 11 4 - ADC4, Channel 14 5 - Temperature sensor, Channel 16</p>
<p>Default buffer depth is equal to MAX_AV_NB_SAMPLE This allows us to always have more or equal samples than the user requires</p>
<dl class="section note"><dt>Note</dt><dd>: With ChibiOS/RT 2.6.2 and STM32F105 chip the channels have to be interleaved, otherwise the current measurement is affected by the previous channel measured. Most likely bug on ChibiOS ADC driver for this particular chip.</dd></dl>
<p>For 5 actual channels we have to define (DUMMY stants for 1 dummy channel): CH1 + DUMMY + CH2 + DUMMY + CH3 + DUMMY + CH4 + DUMMY + CH_TEMP = 9 channels Then only every second channel is really read. Might be fixed in next version of ChibiOS</p>
<p>V_ref is 3.3V, ADC has 12bit resolution. </p>

<p>Definition in file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a6e829897b1929e18c1413dd484408d4a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_BUF_DEPTH&#160;&#160;&#160;(<a class="el" href="adc_8h.html#a66ebc63de71cc36b02ef080d9e990bac">MAX_AV_NB_SAMPLE</a>/2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00139">139</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p>Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00299">adc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a2934d6c02a6319444fb3e892c72cb8f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USE_AD1&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00064">64</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a0c618f185daded30a24ca6ca8a5b9f90"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adc1callback </td>
          <td>(</td>
          <td class="paramtype">ADCDriver *&#160;</td>
          <td class="paramname"><em>adcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">adcsample_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adc1 callback. </p>
<p>Callback, fired after half of the buffer is filled (i.e. half of the samples is collected). Since we are assuming continuous ADC conversion, the ADC state is never equal to ADC_COMPLETE.</p>
<dl class="section note"><dt>Note</dt><dd>Averaging is done when the subsystems ask for ADC values </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">adcp</td><td>pointer to a <code>ADCDriver</code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>pointer to a <code>buffer</code> with samples </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>number of samples </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00219">219</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p>References <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00146">adc1_samples_tmp</a>, <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00145">adc1_sum_tmp</a>, <a class="el" href="chibios_2mcu__periph_2adc__arch_8h_source.html#l00093">ADC_NUM_CHANNELS</a>, <a class="el" href="adc_8h_source.html#l00057">adc_buf::av_nb_sample</a>, <a class="el" href="ADS8344_8c_source.html#l00080">channel</a>, and <a class="el" href="adc_8h_source.html#l00054">adc_buf::sum</a>.</p>

<p>Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00299">adc_init()</a>.</p>

<p><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="chibios_2mcu__periph_2adc__arch_8c_a0c618f185daded30a24ca6ca8a5b9f90_icgraph.png" border="0" usemap="#chibios_2mcu__periph_2adc__arch_8c_a0c618f185daded30a24ca6ca8a5b9f90_icgraph" alt=""/></div>
<map name="chibios_2mcu__periph_2adc__arch_8c_a0c618f185daded30a24ca6ca8a5b9f90_icgraph" id="chibios_2mcu__periph_2adc__arch_8c_a0c618f185daded30a24ca6ca8a5b9f90_icgraph">
<area shape="rect" id="node2" href="adc_8h.html#a2b815e6730e8723a6d1d06d9ef8f31c0" title="Starts conversions. " alt="" coords="157,56,228,83"/><area shape="rect" id="node3" href="group__mcu__periph.html#ga9af744358ff4b1e3e33d7dd170862f9b" title="Microcontroller peripherals initialization. " alt="" coords="276,56,352,83"/><area shape="rect" id="node4" href="lpc21_2uart__tunnel_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="413,5,467,32"/><area shape="rect" id="node5" href="demo__ahrs__actuators_8c.html#afaa8374e20b79aaf7cfcea5ad9467ab1" title="main_init" alt="" coords="400,56,480,83"/><area shape="rect" id="node9" href="fixedwing_2main__fbw_8h.html#ad86b7fe577a2414df2c7a5a9222aa45a" title="init_fbw" alt="" coords="405,107,475,133"/><area shape="rect" id="node6" href="demo__ahrs__actuators_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="568,5,623,32"/><area shape="rect" id="node7" href="nps__autopilot__rotorcraft_8c.html#a3348493e992edd2442581c1d09446b4b" title="nps_autopilot_init" alt="" coords="528,56,663,83"/><area shape="rect" id="node8" href="nps__main__hitl_8c.html#a72ef549ee35deec8c017e83d9de38f66" title="nps_radio_and_autopilot_init" alt="" coords="711,56,915,83"/><area shape="rect" id="node10" href="sim__ap_8c.html#a739fbef2e03619a863b4d7fd8d0da157" title="sim_init" alt="" coords="560,107,631,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a289883844d6749adab1cee5aabe41824"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adc_buf_channel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>adc_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="adc_8h.html#structadc__buf">adc_buf</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>av_nb_sample</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Link between ChibiOS ADC drivers and Paparazzi adc_buffers. </p>
<p>Registers a buffer to be used to store the specified converted channel Usage: </p>

<p>Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00276">276</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p>Referenced by <a class="el" href="adc__generic_8c_source.html#l00077">adc_generic_init()</a>, <a class="el" href="airspeed__adc_8c_source.html#l00057">airspeed_adc_init()</a>, <a class="el" href="aoa__adc_8c_source.html#l00066">aoa_adc_init()</a>, <a class="el" href="booz_2baro__board_8c_source.html#l00065">baro_init()</a>, <a class="el" href="electrical_8c_source.html#l00099">electrical_init()</a>, <a class="el" href="enose_8c_source.html#l00025">enose_init()</a>, <a class="el" href="glide__wing__lock_8c_source.html#l00058">glide_wing_lock_init()</a>, <a class="el" href="humid__hih_8c_source.html#l00053">humid_hih_init()</a>, <a class="el" href="imu__analog_8c_source.html#l00030">imu_analog_init()</a>, <a class="el" href="infrared__adc_8c_source.html#l00071">infrared_adc_init()</a>, <a class="el" href="light__solar_8c_source.html#l00054">light_solar_init()</a>, <a class="el" href="light__temt_8c_source.html#l00049">light_temt_init()</a>, <a class="el" href="mf__ptu_8c_source.html#l00076">mf_ptu_init()</a>, <a class="el" href="sonar__adc_8c_source.html#l00056">sonar_adc_init()</a>, <a class="el" href="temp__adc_8c_source.html#l00129">temp_adc_init()</a>, <a class="el" href="temp__tcouple__adc_8c_source.html#l00056">temp_tcouple_adc_init()</a>, and <a class="el" href="vms__ecu__demo_8c_source.html#l00190">vms_ecu_demo_init()</a>.</p>

<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="chibios_2mcu__periph_2adc__arch_8c_a289883844d6749adab1cee5aabe41824_icgraph.png" border="0" usemap="#chibios_2mcu__periph_2adc__arch_8c_a289883844d6749adab1cee5aabe41824_icgraph" alt=""/></div>
<map name="chibios_2mcu__periph_2adc__arch_8c_a289883844d6749adab1cee5aabe41824_icgraph" id="chibios_2mcu__periph_2adc__arch_8c_a289883844d6749adab1cee5aabe41824_icgraph">
<area shape="rect" id="node2" href="adc__generic_8c.html#a5d3cd37fdd77f995b25ed0837831e829" title="adc_generic_init" alt="" coords="203,5,329,32"/><area shape="rect" id="node3" href="airspeed__adc_8h.html#afa4a95f4df116ecb7c849a98d941d24d" title="airspeed_adc_init" alt="" coords="199,56,333,83"/><area shape="rect" id="node4" href="aoa__adc_8h.html#a32183c1b867389ea1b510c6a9bb6bb52" title="aoa_adc_init" alt="" coords="215,107,317,133"/><area shape="rect" id="node5" href="booz_2baro__board_8c.html#a9b25546908842f1d38fc56e438d46e21" title="baro_init" alt="" coords="227,157,305,184"/><area shape="rect" id="node6" href="electrical_8h.html#ac5e9a56281268bdf6ddec2143b25f16a" title="electrical_init" alt="" coords="213,208,319,235"/><area shape="rect" id="node10" href="enose_8c.html#a1c7e3e1d0fe5a0d5e5fe1364b1f2a100" title="enose_init" alt="" coords="223,259,309,285"/><area shape="rect" id="node11" href="glide__wing__lock_8h.html#a4bc143fe844932b1a873e9d6b9ed5009" title="glide_wing_lock_init" alt="" coords="193,309,339,336"/><area shape="rect" id="node12" href="humid__hih_8h.html#acb068afb2e3c2f0e3c6c1a7c3abeaddf" title="humid_hih_init" alt="" coords="209,360,323,387"/><area shape="rect" id="node13" href="imu__analog_8h.html#af0e5df5bbb77b49b8638056f6d101279" title="imu_analog_init" alt="" coords="205,411,327,437"/><area shape="rect" id="node14" href="subsystems_2sensors_2infrared__adc_8h.html#afd9b914e78df4722702ab0113752a2b0" title="Initialisation of ir. " alt="" coords="203,461,329,488"/><area shape="rect" id="node16" href="light__solar_8h.html#ac0e039b9f8ad2272b10b4129733d1114" title="light_solar_init" alt="" coords="209,512,323,539"/><area shape="rect" id="node17" href="light__temt_8h.html#a0cdfdd43940fde9fe395ea50cbacd148" title="light_temt_init" alt="" coords="209,563,323,589"/><area shape="rect" id="node18" href="mf__ptu_8h.html#a0f4e02c4cf993d86c38de1bebc67fcd5" title="Data acquisition module for Meteo France PTU board. " alt="" coords="219,613,313,640"/><area shape="rect" id="node19" href="sonar__adc_8h.html#a466b5be82e90d99245cf4be834f64c98" title="sonar_adc_init" alt="" coords="209,664,323,691"/><area shape="rect" id="node20" href="temp__adc_8h.html#a266db1bf5ea82dcb94e97eb562c18473" title="Temperature ADC initialize channels. " alt="" coords="210,715,322,741"/><area shape="rect" id="node21" href="temp__tcouple__adc_8h.html#ad9927446cc531cf79cbd60506e2b715c" title="temp_tcouple_adc_init" alt="" coords="183,765,349,792"/><area shape="rect" id="node22" href="vms__ecu__demo_8h.html#a3c135b83d60db6b6b05aafa7de945095" title="vms_ecu_demo_init" alt="" coords="191,816,341,843"/><area shape="rect" id="node7" href="rotorcraft_2main__fbw_8h.html#a3719465edd56d2b587a6b340f29e4f90" title="Main initialization. " alt="" coords="406,183,486,209"/><area shape="rect" id="node8" href="fixedwing_2main__fbw_8h.html#ad86b7fe577a2414df2c7a5a9222aa45a" title="init_fbw" alt="" coords="411,233,481,260"/><area shape="rect" id="node9" href="sim__ap_8c.html#a739fbef2e03619a863b4d7fd8d0da157" title="sim_init" alt="" coords="543,233,613,260"/><area shape="rect" id="node15" href="infrared__adc_8c.html#a914de0b4811e25ca619529374d7fe3ba" title="infrared_init" alt="" coords="397,461,495,488"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2b815e6730e8723a6d1d06d9ef8f31c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adc_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adc init. </p>
<p>Starts conversions.</p>
<p>Initialize ADC drivers, buffers and start conversion in the background </p>

<p>Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00299">299</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p>Referenced by <a class="el" href="mcu_8c_source.html#l00076">mcu_init()</a>.</p>

<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="chibios_2mcu__periph_2adc__arch_8c_a2b815e6730e8723a6d1d06d9ef8f31c0_icgraph.png" border="0" usemap="#chibios_2mcu__periph_2adc__arch_8c_a2b815e6730e8723a6d1d06d9ef8f31c0_icgraph" alt=""/></div>
<map name="chibios_2mcu__periph_2adc__arch_8c_a2b815e6730e8723a6d1d06d9ef8f31c0_icgraph" id="chibios_2mcu__periph_2adc__arch_8c_a2b815e6730e8723a6d1d06d9ef8f31c0_icgraph">
<area shape="rect" id="node2" href="group__mcu__periph.html#ga9af744358ff4b1e3e33d7dd170862f9b" title="Microcontroller peripherals initialization. " alt="" coords="124,56,200,83"/><area shape="rect" id="node3" href="lpc21_2uart__tunnel_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="261,5,315,32"/><area shape="rect" id="node4" href="demo__ahrs__actuators_8c.html#afaa8374e20b79aaf7cfcea5ad9467ab1" title="main_init" alt="" coords="248,56,328,83"/><area shape="rect" id="node8" href="fixedwing_2main__fbw_8h.html#ad86b7fe577a2414df2c7a5a9222aa45a" title="init_fbw" alt="" coords="253,107,323,133"/><area shape="rect" id="node5" href="demo__ahrs__actuators_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="416,5,471,32"/><area shape="rect" id="node6" href="nps__autopilot__rotorcraft_8c.html#a3348493e992edd2442581c1d09446b4b" title="nps_autopilot_init" alt="" coords="376,56,511,83"/><area shape="rect" id="node7" href="nps__main__hitl_8c.html#a72ef549ee35deec8c017e83d9de38f66" title="nps_radio_and_autopilot_init" alt="" coords="559,56,763,83"/><area shape="rect" id="node9" href="sim__ap_8c.html#a739fbef2e03619a863b4d7fd8d0da157" title="sim_init" alt="" coords="408,107,479,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab20565c2f3d25af97a62849647c4cd71"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void adc_regular_sequence </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>sqr1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>sqr2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>sqr3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>channel</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00166">166</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p>Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00299">adc_init()</a>.</p>

<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="chibios_2mcu__periph_2adc__arch_8c_ab20565c2f3d25af97a62849647c4cd71_icgraph.png" border="0" usemap="#chibios_2mcu__periph_2adc__arch_8c_ab20565c2f3d25af97a62849647c4cd71_icgraph" alt=""/></div>
<map name="chibios_2mcu__periph_2adc__arch_8c_ab20565c2f3d25af97a62849647c4cd71_icgraph" id="chibios_2mcu__periph_2adc__arch_8c_ab20565c2f3d25af97a62849647c4cd71_icgraph">
<area shape="rect" id="node2" href="adc_8h.html#a2b815e6730e8723a6d1d06d9ef8f31c0" title="Starts conversions. " alt="" coords="220,56,291,83"/><area shape="rect" id="node3" href="group__mcu__periph.html#ga9af744358ff4b1e3e33d7dd170862f9b" title="Microcontroller peripherals initialization. " alt="" coords="339,56,415,83"/><area shape="rect" id="node4" href="lpc21_2uart__tunnel_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="475,5,530,32"/><area shape="rect" id="node5" href="demo__ahrs__actuators_8c.html#afaa8374e20b79aaf7cfcea5ad9467ab1" title="main_init" alt="" coords="463,56,543,83"/><area shape="rect" id="node9" href="fixedwing_2main__fbw_8h.html#ad86b7fe577a2414df2c7a5a9222aa45a" title="init_fbw" alt="" coords="468,107,537,133"/><area shape="rect" id="node6" href="demo__ahrs__actuators_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="631,5,685,32"/><area shape="rect" id="node7" href="nps__autopilot__rotorcraft_8c.html#a3348493e992edd2442581c1d09446b4b" title="nps_autopilot_init" alt="" coords="591,56,725,83"/><area shape="rect" id="node8" href="nps__main__hitl_8c.html#a72ef549ee35deec8c017e83d9de38f66" title="nps_radio_and_autopilot_init" alt="" coords="773,56,977,83"/><area shape="rect" id="node10" href="sim__ap_8c.html#a739fbef2e03619a863b4d7fd8d0da157" title="sim_init" alt="" coords="623,107,693,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa4fef74b6c7509b76877e940657b2603"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void adc_sample_time_on_all_channels </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>smpr1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>smpr2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00190">190</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p>Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00299">adc_init()</a>.</p>

<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="chibios_2mcu__periph_2adc__arch_8c_aa4fef74b6c7509b76877e940657b2603_icgraph.png" border="0" usemap="#chibios_2mcu__periph_2adc__arch_8c_aa4fef74b6c7509b76877e940657b2603_icgraph" alt=""/></div>
<map name="chibios_2mcu__periph_2adc__arch_8c_aa4fef74b6c7509b76877e940657b2603_icgraph" id="chibios_2mcu__periph_2adc__arch_8c_aa4fef74b6c7509b76877e940657b2603_icgraph">
<area shape="rect" id="node2" href="adc_8h.html#a2b815e6730e8723a6d1d06d9ef8f31c0" title="Starts conversions. " alt="" coords="212,56,283,83"/><area shape="rect" id="node3" href="group__mcu__periph.html#ga9af744358ff4b1e3e33d7dd170862f9b" title="Microcontroller peripherals initialization. " alt="" coords="331,56,407,83"/><area shape="rect" id="node4" href="lpc21_2uart__tunnel_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="467,5,522,32"/><area shape="rect" id="node5" href="demo__ahrs__actuators_8c.html#afaa8374e20b79aaf7cfcea5ad9467ab1" title="main_init" alt="" coords="455,56,535,83"/><area shape="rect" id="node9" href="fixedwing_2main__fbw_8h.html#ad86b7fe577a2414df2c7a5a9222aa45a" title="init_fbw" alt="" coords="460,107,529,133"/><area shape="rect" id="node6" href="demo__ahrs__actuators_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="623,5,677,32"/><area shape="rect" id="node7" href="nps__autopilot__rotorcraft_8c.html#a3348493e992edd2442581c1d09446b4b" title="nps_autopilot_init" alt="" coords="583,56,717,83"/><area shape="rect" id="node8" href="nps__main__hitl_8c.html#a72ef549ee35deec8c017e83d9de38f66" title="nps_radio_and_autopilot_init" alt="" coords="765,56,969,83"/><area shape="rect" id="node10" href="sim__ap_8c.html#a739fbef2e03619a863b4d7fd8d0da157" title="sim_init" alt="" coords="615,107,685,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab33213b168f1b881ddc092b70d45e130"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void adcerrorcallback </td>
          <td>(</td>
          <td class="paramtype">ADCDriver *&#160;</td>
          <td class="paramname"><em>adcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">adcerror_t&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adc error callback. </p>
<p>Fired if DMA error happens or ADC overflows </p>

<p>Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00265">265</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p>References <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00133">adc_error_flag</a>, and <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00134">adcp_err</a>.</p>

<p>Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00299">adc_init()</a>.</p>

<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="chibios_2mcu__periph_2adc__arch_8c_ab33213b168f1b881ddc092b70d45e130_icgraph.png" border="0" usemap="#chibios_2mcu__periph_2adc__arch_8c_ab33213b168f1b881ddc092b70d45e130_icgraph" alt=""/></div>
<map name="chibios_2mcu__periph_2adc__arch_8c_ab33213b168f1b881ddc092b70d45e130_icgraph" id="chibios_2mcu__periph_2adc__arch_8c_ab33213b168f1b881ddc092b70d45e130_icgraph">
<area shape="rect" id="node2" href="adc_8h.html#a2b815e6730e8723a6d1d06d9ef8f31c0" title="Starts conversions. " alt="" coords="180,56,251,83"/><area shape="rect" id="node3" href="group__mcu__periph.html#ga9af744358ff4b1e3e33d7dd170862f9b" title="Microcontroller peripherals initialization. " alt="" coords="299,56,375,83"/><area shape="rect" id="node4" href="lpc21_2uart__tunnel_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="435,5,490,32"/><area shape="rect" id="node5" href="demo__ahrs__actuators_8c.html#afaa8374e20b79aaf7cfcea5ad9467ab1" title="main_init" alt="" coords="423,56,503,83"/><area shape="rect" id="node9" href="fixedwing_2main__fbw_8h.html#ad86b7fe577a2414df2c7a5a9222aa45a" title="init_fbw" alt="" coords="428,107,497,133"/><area shape="rect" id="node6" href="demo__ahrs__actuators_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="591,5,645,32"/><area shape="rect" id="node7" href="nps__autopilot__rotorcraft_8c.html#a3348493e992edd2442581c1d09446b4b" title="nps_autopilot_init" alt="" coords="551,56,685,83"/><area shape="rect" id="node8" href="nps__main__hitl_8c.html#a72ef549ee35deec8c017e83d9de38f66" title="nps_radio_and_autopilot_init" alt="" coords="733,56,937,83"/><area shape="rect" id="node10" href="sim__ap_8c.html#a739fbef2e03619a863b4d7fd8d0da157" title="sim_init" alt="" coords="583,107,653,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9ca94b04798d83640f0b79ea81fe46a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static IN_DMA_SECTION </td>
          <td>(</td>
          <td class="paramtype">adcsample_t&#160;</td>
          <td class="paramname"><em>adc_samples</em>[ADC_NUM_CHANNELS *ADC_BUF_DEPTH]</td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a235d7be89fd1bddc533d5cb64bf0a839"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="adc_8h.html#structadc__buf">adc_buf</a>* adc1_buffers[<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00144">144</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

</div>
</div>
<a class="anchor" id="a99a4c90a514730666d9bdd5c36832756"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> adc1_samples_tmp[<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00146">146</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p>Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00219">adc1callback()</a>.</p>

</div>
</div>
<a class="anchor" id="a48348066f5ca0fe6ddf05e233559e513"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a06896e8c53f721507066c079052171f8">uint32_t</a> adc1_sum_tmp[<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00145">145</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p>Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00219">adc1callback()</a>.</p>

</div>
</div>
<a class="anchor" id="acee546d2b3b7908820ea25216782402b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> adc_channel_map[<a class="el" href="chibios_2mcu__periph_2adc__arch_8h.html#ada9f09bbee2e15c2069f4c25ec74bed8">ADC_NUM_CHANNELS</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>#endif </p>

<p>Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00082">82</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p>Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00299">adc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="afd39363b0bc5b73c6cb4b0d0cc484d90"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> adc_error_flag = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00133">133</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p>Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00265">adcerrorcallback()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a781bb82a68e5872fbd38fda51f0edb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ADCConversionGroup adcgrpcfg</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Configuration structure must be global. </p>

<p>Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00292">292</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p>Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00299">adc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ae518ea232632d8202116d5981e6c7be8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ADCDriver* adcp_err = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00134">134</a> of file <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html">adc_arch.c</a>.</p>

<p>Referenced by <a class="el" href="chibios_2mcu__periph_2adc__arch_8c_source.html#l00265">adcerrorcallback()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_01fcd3835fb4e7d9331b722d86291b65.html">sw</a></li><li class="navelem"><a class="el" href="dir_5e9153041680afc3c016fd52fa730b56.html">airborne</a></li><li class="navelem"><a class="el" href="dir_fc6475eb39ea0144fb6697b809fd11a9.html">arch</a></li><li class="navelem"><a class="el" href="dir_975986b9e0eb299e77243bf822f828ce.html">chibios</a></li><li class="navelem"><a class="el" href="dir_b82140776176b28f52d7ab660bc0e8ab.html">mcu_periph</a></li><li class="navelem"><a class="el" href="chibios_2mcu__periph_2adc__arch_8c.html">adc_arch.c</a></li>
    <li class="footer">Generated on Wed Nov 8 2017 12:02:41 for Paparazzi UAS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
